#### 题目描述

某个充电站，可提供n个充电设备，每个充电设备均有对应的输出功率。任意个充电设备组合的输出功率总和，均构成功率集合P的1个元素。功率集合P的最优元素，表示最接近充电站最大输出功率p_max的元素。

#### 输入描述

输入为3行：

  * 第1行为充电设备个数n
  * 第2行为每个充电设备的输出功率
  * 第3行为充电站最大输出功率p_max

#### 输出描述

功率集合P的最优元素

#### 备注

  * 充电设备个数 n > 0
  * 最优元素必须小于或等于充电站最大输出功率p_max

#### 用例

输入| 4  
50 20 20 60  
90  
---|---  
输出| 90  
说明| 当充电设备输出功率50、20、20组合时，其输出功率总和为90，最接近充电站最大充电输出功率，因此最优元素为90。  
输入| 2  
50 40  
30  
---|---  
输出| 0  
说明| 所有充电设备的输出功率组合，均大于充电站最大充电输出功率30，此时最优元素值为0。  
  
#### 题目解析

本题可以看作是01背包问题。具体来说：

第3行中的充电站最大输出功率p_max可以看作是背包的最大承重；

第2行中每个充电设备的输出功率可以看作是不同物品的重量和价值，即重量=价值。

因此，现在需要求出在背包承重下能够装入的最大价值。

#### 代码思路

这是一道01背包的题目。题目要求任意个充电设备组合的输出功率总和，均构成功率集合P的1个元素。因此，我们可以将问题转化为求解最接近充电站最大输出功率p_max的元素。

我们可以使用一个二维数组dp[i][j]表示前i个充电设备中，总功率不超过j时的最大功率。其中，i表示前i个充电设备，j表示总功率不超过j。

对于每个充电设备，我们可以选择选或不选。如果当前充电设备的功率大于当前总功率j，那么不能选，我们就不选当前充电设备。如果当前充电设备的功率小于等于当前总功率j，那么我们可以选择选或不选当前充电设备。如果选当前充电设备，那么当前总功率就是当前充电设备的功率加上前i-1个充电设备中总功率不超过j-
当前充电设备功率的最大值，即dp[i-1][j-power[i-1]]+power[i-1]；如果不选当前充电设备，那么当前总功率就是前i-1个充电设备中总功率不超过j的最大值，即dp[i-1][j]。因此，我们可以得到状态转移方程：dp[i][j]
= max(dp[i-1][j], dp[i-1][j-power[i-1]]+power[i-1])。

最终，dp[n][p_max]就是最大功率，即功率集合P的最优元素。

#### C++

    
    
    // 本题使用动态规划求解，dp[i][j]表示前i个充电设备中，总功率不超过j时的最大功率
    #include <iostream>
    using namespace std;
    
    int main() {
        int n; // 充电设备个数
        cin >> n;
    
        int power[n]; // 每个充电设备的输出功率
        for (int i = 0; i < n; i++) {
            cin >> power[i];
        }
    
        int p_max; // 充电站最大输出功率
        cin >> p_max;
    
        int dp[n + 1][p_max + 1] = {}; // 初始化为0
    
        for (int i = 1; i <= n; i++) {
            for (int j = 1; j <= p_max; j++) {
                if (power[i - 1] > j) { // 当前充电设备的功率大于当前总功率j，不能选
                    dp[i][j] = dp[i - 1][j]; // 不选当前充电设备
                } else {
                    dp[i][j] = max(dp[i - 1][j], power[i - 1] + dp[i - 1][j - power[i - 1]]); // 选或不选当前充电设备
                }
            }
        }
    
        cout << dp[n][p_max] << endl; // 输出最大功率
    
        return 0;
    }
    

#### 文章目录

  *     *       * 题目描述
      * 输入描述
      * 输出描述
      * 备注
      * 用例
      * 题目解析
      * 代码思路
      * C++

![doutub_gif](https://i-blog.csdnimg.cn/blog_migrate/e9413fcd109f2f3d7297192eab0c0b2a.gif)

