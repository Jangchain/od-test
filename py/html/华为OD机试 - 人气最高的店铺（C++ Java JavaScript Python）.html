
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="_1"></a>题目描述</h4> 
<p>某购物城有m个商铺，现决定举办一场活动选出人气最高店铺。</p> 
<p>活动共有n位市民参与，每位市民只能投一票，但1号店铺如果给该市民发放 q 元的购物补贴，该市民会改为投1号店铺。</p> 
<p>请计算1号店铺需要最少发放多少元购物补贴才能成为人气最高店铺（即获得的票数要大于其他店铺），如果1号店铺本身就是票数最高店铺，返回0。</p> 
<h4><a id="_9"></a>输入描述</h4> 
<p>第一行为小写逗号分割的两个整数n，m，其中：</p> 
<ul><li>第一个整数n表示参与的市民总数</li><li>第二个整数m代表店铺总数</li><li>1 ≤ n,m ≤ 3000</li></ul> 
<p>第2到n+1行，每行为小写逗号分割的两个整数p，q，表示市民的意向投票情况，其中每行的：</p> 
<ul><li>第一个整数p表示该市民意向投票给p号店铺</li><li>第二个整数q表示其改投1号店铺所需给予的q元购物补贴</li><li>1 ≤ p ≤ m</li><li>1 ≤ g ≤ 10^9</li></ul> 
<p>不考虑输入的格式问题</p> 
<h4><a id="_26"></a>输出描述</h4> 
<p>1号店铺需要最少发放购物补贴金额</p> 
<h4><a id="1_30"></a>用例1</h4> 
<p>输入</p> 
<pre><code>5,5
2,10
3,20
4,30
5,40
5,90
</code></pre> 
<p>输出</p> 
<pre><code>50
</code></pre> 
<blockquote> 
 <p>说明 <br> 有5个人参与，共5个店铺。<br> 如果选择发放 10元+20元+30元=60元 的补贴来抢2,3.4号店铺的票，总共发放了60元补贴（5号店铺有2票，1号店铺要3票才能胜出）</p> 
 <p>如果选择发放 10元+40元=50元 的补贴来抢2,5号店铺的票，总共发放了50元补贴（抢了5号店铺的票后，现在1号店铺只要2票就能胜出）</p> 
 <p>所以最少发放50元补贴</p> 
</blockquote> 
<h4><a id="2_59"></a>用例2</h4> 
<p>输入</p> 
<pre><code>5,5
2,10
3,20
4,30
5,80
5,90
</code></pre> 
<p>输出</p> 
<pre><code>60
</code></pre> 
<blockquote> 
 <p>说明 <br> 有5个人参与，共5个店铺。</p> 
 <p>如果选择发放 10元+20元+30元=60元 的补贴来抢2,3,4号店铺的票，总共发放了60元补贴(5号店铺有2票，1号店铺要3票才能胜出)</p> 
 <p>如果选择发放 10元+80元=90元 的补贴来抢2,5号店铺的票，总共发放了90元补贴(抢了5号店铺的票后，现在1号店铺只要2票就能胜出)</p> 
 <p>所以最少发放60元补贴</p> 
</blockquote> 
<h4><a id="_88"></a>题目解析</h4> 
<p>上面的 Java 代码和转换后的 Node.js 代码是为了解决一个问题：给定一组市民对商店的投票信息，计算使得1号商店成为票数最高商店所需的最小补贴金额。下面是详细的解题思路和解题方法：</p> 
<ol><li> <p><strong>输入处理</strong>：首先，我们需要处理输入。 我们需要读取两个整数 n 和 m，分别表示参与的市民总数和店铺总数。接下来，我们需要读取 n 行输入，每行包含两个整数，分别表示市民投票的店铺 ID 和改投 1 号店铺所需的补贴金额。</p> </li><li> <p><strong>初始化数据结构</strong>：我们需要初始化两个数据结构来存储投票信息。一个是 <code>voters</code> 列表，用于存储市民投票信息；另一个是 <code>shopVotes</code> 映射，用于存储每个商店的票数。我们还需要初始化一个变量 <code>minSubsidy</code>，用于存储最小补贴金额，初始值为 <code>Integer.MAX_VALUE</code>（Java）或 <code>Number.MAX_VALUE</code>（Node.js）。</p> </li><li> <p><strong>读取投票信息</strong>：遍历输入的每一行，将市民投票信息添加到 <code>voters</code> 列表中，并更新 <code>shopVotes</code> 映射中的票数。注意，如果市民已经投票给 1 号店铺，我们不需要将其添加到 <code>voters</code> 列表中，因为我们不需要为这些市民发放补贴。</p> </li><li> <p><strong>计算最小补贴金额</strong>：我们使用递归函数 <code>calculateSubsidy</code> 来计算最小补贴金额。这个函数有四个参数：<code>voters</code> 列表、当前处理的市民索引 <code>index</code>、当前已发放的补贴金额 <code>currentSubsidy</code> 和 <code>shopVotes</code> 映射。我们使用回溯法来尝试所有可能的补贴发放方案，并在每个方案中检查 1 号店铺是否成为票数最高的店铺。如果是，则更新 <code>minSubsidy</code> 变量。</p> </li><li> <p><strong>递归函数的实现</strong>：在 <code>calculateSubsidy</code> 函数中，我们首先检查边界条件：如果所有市民都已处理（即 <code>index === voters.length</code>），则检查 1 号店铺是否是票数最高的店铺，如果是且当前补贴金额小于 <code>minSubsidy</code>，则更新 <code>minSubsidy</code>。接下来，我们处理当前市民的投票信息。我们尝试两种方案：不发放补贴和发放补贴。在不发放补贴的方案中，我们直接递归处理下一个市民；在发放补贴的方案中，我们更新 <code>shopVotes</code> 映射中的票数，递归处理下一个市民，然后回溯恢复 <code>shopVotes</code> 映射中的票数。</p> </li><li> <p><strong>判断 1 号店铺是否是票数最高的店铺</strong>：我们使用一个辅助函数 <code>isTop1</code> 来判断 1 号店铺是否是票数最高的店铺。这个函数遍历 <code>shopVotes</code> 映射，找到除 1 号店铺外的最高票数，然后比较 1 号店铺的票数是否大于这个最高票数。</p> </li><li> <p><strong>输出结果</strong>：最后，我们输出计算得到的最小补贴金额 <code>minSubsidy</code>。</p> </li></ol> 
<h4><a id="JavaScript_110"></a>JavaScript</h4> 
<pre><code class="prism language-js"><span class="token keyword">const</span> readline <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'readline'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> rl <span class="token operator">=</span> readline<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  input<span class="token operator">:</span> process<span class="token punctuation">.</span>stdin<span class="token punctuation">,</span>
  output<span class="token operator">:</span> process<span class="token punctuation">.</span>stdout
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> minSubsidy <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span> <span class="token comment">// 最小补贴金额</span>

<span class="token comment">// 读取输入</span>
<span class="token keyword">const</span> input <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'line'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">line</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  input<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>input<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    rl<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>n<span class="token punctuation">,</span> m<span class="token punctuation">]</span> <span class="token operator">=</span> input<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 参与的市民总数和店铺总数</span>
  <span class="token keyword">const</span> voters <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 市民投票信息列表</span>
  <span class="token keyword">const</span> shopVotes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 商店票数映射</span>
  shopVotes<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 初始化1号店铺票数为0</span>

  <span class="token comment">// 读取市民投票信息</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> input<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>shopId<span class="token punctuation">,</span> subsidy<span class="token punctuation">]</span> <span class="token operator">=</span> input<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>shopId <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      voters<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>shopId<span class="token punctuation">,</span> subsidy<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    shopVotes<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>shopId<span class="token punctuation">,</span> <span class="token punctuation">(</span>shopVotes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>shopId<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 计算最小补贴金额</span>
  <span class="token function">calculateSubsidy</span><span class="token punctuation">(</span>voters<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> shopVotes<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>minSubsidy<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 计算最小补贴金额的递归函数</span>
<span class="token keyword">function</span> <span class="token function">calculateSubsidy</span><span class="token punctuation">(</span><span class="token parameter">voters<span class="token punctuation">,</span> index<span class="token punctuation">,</span> currentSubsidy<span class="token punctuation">,</span> shopVotes</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> voters<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 边界条件：所有市民都已处理</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isTop1</span><span class="token punctuation">(</span>shopVotes<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> minSubsidy <span class="token operator">&gt;</span> currentSubsidy<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      minSubsidy <span class="token operator">=</span> currentSubsidy<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token punctuation">[</span>shopId<span class="token punctuation">,</span> subsidy<span class="token punctuation">]</span> <span class="token operator">=</span> voters<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 当前处理的市民</span>

  <span class="token comment">// 尝试不发放补贴</span>
  <span class="token function">calculateSubsidy</span><span class="token punctuation">(</span>voters<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> currentSubsidy<span class="token punctuation">,</span> shopVotes<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 发放补贴</span>
  shopVotes<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>shopId<span class="token punctuation">,</span> shopVotes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>shopId<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 原店铺票数减1</span>
  shopVotes<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> shopVotes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1号店铺票数加1</span>
  <span class="token function">calculateSubsidy</span><span class="token punctuation">(</span>voters<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> currentSubsidy <span class="token operator">+</span> subsidy<span class="token punctuation">,</span> shopVotes<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 回溯</span>
  shopVotes<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>shopId<span class="token punctuation">,</span> shopVotes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>shopId<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 原店铺票数加1</span>
  shopVotes<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> shopVotes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1号店铺票数减1</span>
<span class="token punctuation">}</span>

<span class="token comment">// 判断1号店铺是否是票数最高的店铺</span>
<span class="token keyword">function</span> <span class="token function">isTop1</span><span class="token punctuation">(</span><span class="token parameter">shopVotes</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> maxVotes <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>shopId<span class="token punctuation">,</span> votes<span class="token punctuation">]</span> <span class="token keyword">of</span> shopVotes<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>shopId <span class="token operator">!==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> votes <span class="token operator">&gt;=</span> maxVotes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      maxVotes <span class="token operator">=</span> votes<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> shopVotes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> maxVotes<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="C_188"></a>C++</h4> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unordered_map&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sstream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;limits&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>

using namespace std<span class="token punctuation">;</span>

<span class="token keyword">int</span> minSubsidy <span class="token operator">=</span> numeric_limits<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">::</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 最小补贴金额</span>

<span class="token comment">// 判断1号店铺是否是票数最高的店铺</span>
bool <span class="token function">isTop1</span><span class="token punctuation">(</span><span class="token keyword">const</span> unordered_map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> shopVotes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> maxVotes <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> entry <span class="token operator">:</span> shopVotes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>first <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> entry<span class="token punctuation">.</span>second <span class="token operator">&gt;=</span> maxVotes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            maxVotes <span class="token operator">=</span> entry<span class="token punctuation">.</span>second<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> shopVotes<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> maxVotes<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 计算最小补贴金额的递归函数</span>
<span class="token keyword">void</span> <span class="token function">calculateSubsidy</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> voters<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token keyword">int</span> currentSubsidy<span class="token punctuation">,</span> unordered_map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> shopVotes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> voters<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 边界条件：所有市民都已处理</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isTop1</span><span class="token punctuation">(</span>shopVotes<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> minSubsidy <span class="token operator">&gt;</span> currentSubsidy<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            minSubsidy <span class="token operator">=</span> currentSubsidy<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> currentVoter <span class="token operator">=</span> voters<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 当前处理的市民</span>
    <span class="token keyword">int</span> shopId <span class="token operator">=</span> currentVoter<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 市民投票的店铺ID</span>
    <span class="token keyword">int</span> subsidy <span class="token operator">=</span> currentVoter<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 改投1号店铺所需补贴</span>

    <span class="token comment">// 尝试不发放补贴</span>
    <span class="token function">calculateSubsidy</span><span class="token punctuation">(</span>voters<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> currentSubsidy<span class="token punctuation">,</span> shopVotes<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 发放补贴</span>
    shopVotes<span class="token punctuation">[</span>shopId<span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span> <span class="token comment">// 原店铺票数减1</span>
    shopVotes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// 1号店铺票数加1</span>
    <span class="token function">calculateSubsidy</span><span class="token punctuation">(</span>voters<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> currentSubsidy <span class="token operator">+</span> subsidy<span class="token punctuation">,</span> shopVotes<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 回溯</span>
    shopVotes<span class="token punctuation">[</span>shopId<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// 原店铺票数加1</span>
    shopVotes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span> <span class="token comment">// 1号店铺票数减1</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 输入</span>
    string line<span class="token punctuation">;</span>
    <span class="token function">getline</span><span class="token punctuation">(</span>cin<span class="token punctuation">,</span> line<span class="token punctuation">)</span><span class="token punctuation">;</span>
    stringstream <span class="token function">ss</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">;</span>
    <span class="token keyword">char</span> delimiter<span class="token punctuation">;</span>
    ss <span class="token operator">&gt;&gt;</span> n <span class="token operator">&gt;&gt;</span> delimiter <span class="token operator">&gt;&gt;</span> m<span class="token punctuation">;</span> <span class="token comment">// 参与的市民总数和店铺总数</span>

    <span class="token comment">// 初始化商店和投票人</span>
    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> voters<span class="token punctuation">;</span> <span class="token comment">// 市民投票信息列表</span>
    unordered_map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> shopVotes<span class="token punctuation">;</span> <span class="token comment">// 商店票数映射</span>
    shopVotes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 初始化1号店铺票数为0</span>

    <span class="token comment">// 读取市民投票信息</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">getline</span><span class="token punctuation">(</span>cin<span class="token punctuation">,</span> line<span class="token punctuation">)</span><span class="token punctuation">;</span>
        stringstream <span class="token function">ss</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> shopId<span class="token punctuation">,</span> subsidy<span class="token punctuation">;</span>
        ss <span class="token operator">&gt;&gt;</span> shopId <span class="token operator">&gt;&gt;</span> delimiter <span class="token operator">&gt;&gt;</span> subsidy<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>shopId <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            voters<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>shopId<span class="token punctuation">,</span> subsidy<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        shopVotes<span class="token punctuation">[</span>shopId<span class="token punctuation">]</span> <span class="token operator">=</span> shopVotes<span class="token punctuation">[</span>shopId<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 计算最小补贴金额</span>
    <span class="token function">calculateSubsidy</span><span class="token punctuation">(</span>voters<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> shopVotes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> minSubsidy <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="Java_276"></a>Java</h4> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> minSubsidy <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">;</span> <span class="token comment">// 最小补贴金额</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 输入</span>
        <span class="token class-name">Scanner</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> params <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>in<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">parseInt</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 参与的市民总数</span>
        <span class="token keyword">int</span> m <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 店铺总数</span>

        <span class="token comment">// 初始化商店和投票人</span>
        <span class="token class-name">List</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> voters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 市民投票信息列表</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> shopVotes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 商店票数映射</span>
        shopVotes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 初始化1号店铺票数为0</span>

        <span class="token comment">// 读取市民投票信息</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>in<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">parseInt</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                voters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            shopVotes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> shopVotes<span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 计算最小补贴金额</span>
        <span class="token function">calculateSubsidy</span><span class="token punctuation">(</span>voters<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> shopVotes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>minSubsidy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 计算最小补贴金额的递归函数</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">calculateSubsidy</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> voters<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token keyword">int</span> currentSubsidy<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> shopVotes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> voters<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 边界条件：所有市民都已处理</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isTop1</span><span class="token punctuation">(</span>shopVotes<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> minSubsidy <span class="token operator">&gt;</span> currentSubsidy<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                minSubsidy <span class="token operator">=</span> currentSubsidy<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> currentVoter <span class="token operator">=</span> voters<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 当前处理的市民</span>
        <span class="token keyword">int</span> shopId <span class="token operator">=</span> currentVoter<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 市民投票的店铺ID</span>
        <span class="token keyword">int</span> subsidy <span class="token operator">=</span> currentVoter<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 改投1号店铺所需补贴</span>

        <span class="token comment">// 尝试不发放补贴</span>
        <span class="token function">calculateSubsidy</span><span class="token punctuation">(</span>voters<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> currentSubsidy<span class="token punctuation">,</span> shopVotes<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 发放补贴</span>
        shopVotes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>shopId<span class="token punctuation">,</span> shopVotes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>shopId<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 原店铺票数减1</span>
        shopVotes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> shopVotes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1号店铺票数加1</span>
        <span class="token function">calculateSubsidy</span><span class="token punctuation">(</span>voters<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> currentSubsidy <span class="token operator">+</span> subsidy<span class="token punctuation">,</span> shopVotes<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 回溯</span>
        shopVotes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>shopId<span class="token punctuation">,</span> shopVotes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>shopId<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 原店铺票数加1</span>
        shopVotes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> shopVotes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1号店铺票数减1</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 判断1号店铺是否是票数最高的店铺</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isTop1</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> shopVotes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> maxVotes <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> entry <span class="token operator">:</span> shopVotes<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> maxVotes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                maxVotes <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> shopVotes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> maxVotes<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="Python_352"></a>Python</h4> 
<pre><code class="prism language-python"><span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict
<span class="token keyword">import</span> sys

<span class="token comment"># 最小补贴金额</span>
min_subsidy <span class="token operator">=</span> sys<span class="token punctuation">.</span>maxsize

<span class="token comment"># 判断1号店铺是否是票数最高的店铺</span>
<span class="token keyword">def</span> <span class="token function">is_top1</span><span class="token punctuation">(</span>shop_votes<span class="token punctuation">)</span><span class="token punctuation">:</span>
    max_votes <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> shop_votes<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> key <span class="token operator">!=</span> <span class="token number">1</span> <span class="token keyword">and</span> value <span class="token operator">&gt;=</span> max_votes<span class="token punctuation">:</span>
            max_votes <span class="token operator">=</span> value
    <span class="token keyword">return</span> shop_votes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> max_votes

<span class="token comment"># 计算最小补贴金额的递归函数</span>
<span class="token keyword">def</span> <span class="token function">calculate_subsidy</span><span class="token punctuation">(</span>voters<span class="token punctuation">,</span> index<span class="token punctuation">,</span> current_subsidy<span class="token punctuation">,</span> shop_votes<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> min_subsidy
    <span class="token keyword">if</span> index <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>voters<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 边界条件：所有市民都已处理</span>
        <span class="token keyword">if</span> is_top1<span class="token punctuation">(</span>shop_votes<span class="token punctuation">)</span> <span class="token keyword">and</span> min_subsidy <span class="token operator">&gt;</span> current_subsidy<span class="token punctuation">:</span>
            min_subsidy <span class="token operator">=</span> current_subsidy
        <span class="token keyword">return</span>

    current_voter <span class="token operator">=</span> voters<span class="token punctuation">[</span>index<span class="token punctuation">]</span>  <span class="token comment"># 当前处理的市民</span>
    shop_id <span class="token operator">=</span> current_voter<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment"># 市民投票的店铺ID</span>
    subsidy <span class="token operator">=</span> current_voter<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># 改投1号店铺所需补贴</span>

    <span class="token comment"># 尝试不发放补贴</span>
    calculate_subsidy<span class="token punctuation">(</span>voters<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> current_subsidy<span class="token punctuation">,</span> shop_votes<span class="token punctuation">)</span>

    <span class="token comment"># 发放补贴</span>
    shop_votes<span class="token punctuation">[</span>shop_id<span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span>  <span class="token comment"># 原店铺票数减1</span>
    shop_votes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>  <span class="token comment"># 1号店铺票数加1</span>
    calculate_subsidy<span class="token punctuation">(</span>voters<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> current_subsidy <span class="token operator">+</span> subsidy<span class="token punctuation">,</span> shop_votes<span class="token punctuation">)</span>

    <span class="token comment"># 回溯</span>
    shop_votes<span class="token punctuation">[</span>shop_id<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>  <span class="token comment"># 原店铺票数加1</span>
    shop_votes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span>  <span class="token comment"># 1号店铺票数减1</span>

<span class="token comment"># 主函数</span>
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> min_subsidy
    <span class="token comment"># 输入</span>
    params <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    n <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment"># 参与的市民总数</span>
    m <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># 店铺总数</span>

    <span class="token comment"># 初始化商店和投票人</span>
    voters <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 市民投票信息列表</span>
    shop_votes <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>  <span class="token comment"># 商店票数映射</span>
    shop_votes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># 初始化1号店铺票数为0</span>

    <span class="token comment"># 读取市民投票信息</span>
    <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        nums <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">:</span>
            voters<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        shop_votes<span class="token punctuation">[</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>

    <span class="token comment"># 计算最小补贴金额</span>
    calculate_subsidy<span class="token punctuation">(</span>voters<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> shop_votes<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>min_subsidy<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<h4><a id="_422"></a>完整用例</h4> 
<h5><a id="1_423"></a>用例1</h5> 
<pre><code class="prism language-input1">3,3
2,10
3,20
3,30
</code></pre> 
<h5><a id="2_432"></a>用例2</h5> 
<pre><code class="prism language-input2">4,4
1,0
2,10
3,20
4,30
</code></pre> 
<h5><a id="3_442"></a>用例3</h5> 
<pre><code class="prism language-input3">5,3
1,0
2,10
2,20
3,30
3,40
</code></pre> 
<h5><a id="4_453"></a>用例4</h5> 
<pre><code class="prism language-input4">6,4
1,10
2,10
2,20
3,30
3,40
4,50
</code></pre> 
<h5><a id="5_465"></a>用例5</h5> 
<pre><code class="prism language-input5">5,5
2,10
3,20
4,30
5,40
5,90
</code></pre> 
<h5><a id="6_476"></a>用例6</h5> 
<pre><code class="prism language-input6">5,5
2,10
3,20
4,30
5,80
5,90
</code></pre> 
<h5><a id="7_487"></a>用例7</h5> 
<pre><code class="prism language-input7">6,6
2,5
3,10
4,15
5,20
6,25
6,30
</code></pre> 
<h5><a id="8_499"></a>用例8</h5> 
<pre><code class="prism language-input8">4,3
2,15
3,10
3,15
4,15
</code></pre> 
<h5><a id="9_509"></a>用例9</h5> 
<pre><code class="prism language-input9">5,4
2,10
3,20
4,30
4,40
4,50
</code></pre> 
<h5><a id="10_520"></a>用例10</h5> 
<pre><code class="prism language-input10">7,6
1,1
2,5
3,10
4,15
5,20
6,25
6,30
</code></pre> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#_1" rel="nofollow">题目描述</a></li><li><a href="#_9" rel="nofollow">输入描述</a></li><li><a href="#_26" rel="nofollow">输出描述</a></li><li><a href="#1_30" rel="nofollow">用例1</a></li><li><a href="#2_59" rel="nofollow">用例2</a></li><li><a href="#_88" rel="nofollow">题目解析</a></li><li><a href="#JavaScript_110" rel="nofollow">JavaScript</a></li><li><a href="#C_188" rel="nofollow">C++</a></li><li><a href="#Java_276" rel="nofollow">Java</a></li><li><a href="#Python_352" rel="nofollow">Python</a></li><li><a href="#_422" rel="nofollow">完整用例</a></li><li><ul><li><a href="#1_423" rel="nofollow">用例1</a></li><li><a href="#2_432" rel="nofollow">用例2</a></li><li><a href="#3_442" rel="nofollow">用例3</a></li><li><a href="#4_453" rel="nofollow">用例4</a></li><li><a href="#5_465" rel="nofollow">用例5</a></li><li><a href="#6_476" rel="nofollow">用例6</a></li><li><a href="#7_487" rel="nofollow">用例7</a></li><li><a href="#8_499" rel="nofollow">用例8</a></li><li><a href="#9_509" rel="nofollow">用例9</a></li><li><a href="#10_520" rel="nofollow">用例10</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<p><img src="https://img-blog.csdnimg.cn/img_convert/b98429f56d7b21e9abb6e238d4c69d08.png" alt="fengmian"></p>
                </div>
</body>
</html>
