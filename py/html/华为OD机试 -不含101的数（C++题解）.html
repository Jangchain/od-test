
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="OD_2"></a>最新华为OD机试</h2> 
<p><font color="RED">真题目录：<a href="https://blog.csdn.net/banxia_frontend/article/details/129640773">点击查看目录</a> </font><br> <font color="RED"> 华为OD面试真题精选：<a href="https://blog.csdn.net/banxia_frontend/category_12436481.html">点击立即查看</a></font></p> 
<h2><a id="_6"></a>题目描述</h2> 
<p>小明在学习二进制时，发现了一类不含 101的数，也就是：</p> 
<p>将数字用二进制表示，不能出现 101 。<br> 现在给定一个整数区间 [l,r] ，请问这个区间包含了多少个不含 101 的数？</p> 
<h2><a id="_13"></a>输入描述</h2> 
<p>输入的唯一一行包含两个正整数 l， r（ 1 ≤ l ≤ r ≤ 10^9）。</p> 
<h2><a id="_18"></a>输出描述</h2> 
<p>输出的唯一一行包含一个整数，表示在 [l,r] 区间内一共有几个不含 101 的数。</p> 
<h2><a id="1_22"></a>示例1</h2> 
<p>输入</p> 
<pre><code>1 10
</code></pre> 
<p>输出</p> 
<pre><code>8
</code></pre> 
<p>说明</p> 
<blockquote> 
 <p>区间 [1,10] 内， 5 的二进制表示为 101 ，10的二进制表示为 1010 ，因此区间 [ 1 , 10 ] 内有 10−2=8 个不含 101的数。</p> 
</blockquote> 
<h2><a id="2_40"></a>示例2</h2> 
<p>输入</p> 
<pre><code>10 20
</code></pre> 
<p>输出</p> 
<pre><code>7
</code></pre> 
<p>说明</p> 
<blockquote> 
 <p>区间 [10,20] 内，满足条件的数字有 [12,14,15,16,17,18,19] 因此答案为 7。</p> 
</blockquote> 
<h2><a id="_56"></a>解题思路</h2> 
<p>本题乍看是很简单的题目，直接进制转换，暴力法不就得了。但是你注意看范围是【1 ≤ l ≤ r ≤ 10^9】，暴力肯定会超时。这题使用的是数位DP</p> 
<p><a href="https://blog.csdn.net/wust_zzwh/article/details/52100392">数位dp总结 之 从入门到模板_wust_wenhao的博客-CSDN博客</a></p> 
<p>具体思路是从高位到低位逐位枚举，对于每一位，枚举它的取值，并根据前一位和前两位的值来判断是否符合条件。同时，使用记忆化数组来避免重复计算。</p> 
<p>具体实现中，可以将数字转换为二进制数，然后递归处理每一位。递归函数中，p表示当前处理到的二进制位，limit表示当前位是否受到上限制，f表示记忆化数组，arr表示二进制数，pre表示前一位的值，prepre表示前两位的值。递归结束条件是处理完所有二进制位，此时返回1。在递归过程中，统计符合条件的数的个数，并使用记忆化数组避免重复计算。</p> 
<h2><a id="Java_72"></a>Java</h2> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">dp</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 将数字转换为二进制数组</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> binaryNums <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>num <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            binaryNums<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>num <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 将最低位加入列表</span>
            num <span class="token operator">/=</span> <span class="token number">2</span><span class="token punctuation">;</span>                 <span class="token comment">// 去掉最低位</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span>binaryNums<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 反转数组，使二进制位从高位到低位排列</span>

        <span class="token comment">// 初始化记忆化数组 binaryDp，用于存储已计算过的状态结果，避免重复计算</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> binaryDp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>binaryNums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token comment">// 调用递归搜索函数开始计算</span>
        <span class="token keyword">return</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> binaryDp<span class="token punctuation">,</span> binaryNums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span> p<span class="token punctuation">,</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> binaryDp<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> binaryNums<span class="token punctuation">,</span> <span class="token keyword">int</span> pre<span class="token punctuation">,</span> <span class="token keyword">int</span> prepre<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 边界条件：如果已经处理完所有二进制位，返回 1，表示找到一个符合条件的数</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> binaryNums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 如果当前状态已经计算过且没有上界限制，直接返回保存的结果</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag <span class="token operator">&amp;&amp;</span> binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 当前位的最大值。如果受上界限制，则取 binaryNums[p]；否则为 1</span>
        <span class="token keyword">int</span> index <span class="token operator">=</span> flag <span class="token operator">?</span> binaryNums<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// 记录符合条件的数的个数</span>

        <span class="token comment">// 枚举当前位可能的值（0 或 1）</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> index<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 如果当前位的组合形成 "101" 模式（即 prepre=1, pre=0, 当前位 i=1），则跳过该情况</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> pre <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> prepre <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 递归处理下一位，更新 pre 和 prepre</span>
            count <span class="token operator">+=</span> <span class="token function">search</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> flag <span class="token operator">&amp;&amp;</span> i <span class="token operator">==</span> index<span class="token punctuation">,</span> binaryDp<span class="token punctuation">,</span> binaryNums<span class="token punctuation">,</span> i<span class="token punctuation">,</span> pre<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 如果不受上界限制，将结果保存在记忆化数组 binaryDp 中</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span> <span class="token operator">=</span> count<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> left <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 读取左边界</span>
        <span class="token keyword">int</span> right <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 读取右边界</span>
        scanner<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 计算区间 [left, right] 内不包含 "101" 模式的数的个数</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">dp</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">dp</span><span class="token punctuation">(</span>left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="Python_141"></a>Python</h2> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">dp</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 将数字转化为二进制数组，bin(num)[2:] 将数字 num 转为二进制字符串并去掉 '0b' 前缀</span>
    binaryNums <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">bin</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 初始化记忆化数组 binaryDp，用来存储每个状态的计算结果，防止重复计算</span>
    <span class="token comment"># binaryDp[p][pre][prepre] 表示在第 p 位，前一位 pre 和前两位 prepre 的状态下的结果</span>
    <span class="token comment"># 其中 pre 和 prepre 的值为 0 或 1（即二进制数的一位），所以数组大小是 len(binaryNums) x 2 x 2</span>
    binaryDp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>binaryNums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

    <span class="token comment"># 调用搜索函数，开始递归处理</span>
    <span class="token keyword">return</span> search<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> binaryDp<span class="token punctuation">,</span> binaryNums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">search</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> flag<span class="token punctuation">,</span> binaryDp<span class="token punctuation">,</span> binaryNums<span class="token punctuation">,</span> pre<span class="token punctuation">,</span> prepre<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 边界条件：如果已经处理完所有二进制位，返回 1，表示找到一个符合条件的数</span>
    <span class="token keyword">if</span> p <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>binaryNums<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">1</span>

    <span class="token comment"># 如果当前状态已经计算过，且没有上界限制，直接返回保存的结果</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> flag <span class="token keyword">and</span> binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span>

    <span class="token comment"># 当前位的最大值，flag 为 True 时，当前位的最大值为 binaryNums[p]；否则最大值为 1</span>
    index <span class="token operator">=</span> binaryNums<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token keyword">if</span> flag <span class="token keyword">else</span> <span class="token number">1</span>
    count <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># 用于计数符合条件的数的个数</span>

    <span class="token comment"># 枚举当前位 i 的值，i 只能取 0 或 1</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 如果当前位组成了 "101" 模式（即 prepre=1, pre=0, 当前位 i=1），跳过该情况</span>
        <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">and</span> pre <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">and</span> prepre <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">continue</span>
        <span class="token comment"># 递归处理下一位，更新 pre 和 prepre，继续搜索下一个位</span>
        count <span class="token operator">+=</span> search<span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> flag <span class="token keyword">and</span> i <span class="token operator">==</span> index<span class="token punctuation">,</span> binaryDp<span class="token punctuation">,</span> binaryNums<span class="token punctuation">,</span> i<span class="token punctuation">,</span> pre<span class="token punctuation">)</span>

    <span class="token comment"># 如果没有上界限制，则将结果保存在记忆化数组 binaryDp 中</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> flag<span class="token punctuation">:</span>
        binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span> <span class="token operator">=</span> count

    <span class="token keyword">return</span> count

<span class="token comment"># 主函数部分</span>
left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输入区间 [left, right]</span>
<span class="token comment"># 计算区间 [left, right] 内不包含 "101" 模式的数的个数</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>dp<span class="token punctuation">(</span>right<span class="token punctuation">)</span> <span class="token operator">-</span> dp<span class="token punctuation">(</span>left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="JavaScript_188"></a>JavaScript</h2> 
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">dp</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 将数字转化为二进制数组</span>
    <span class="token keyword">let</span> binaryNums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>num <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 将当前数字的最低位添加到 binaryNums 数组</span>
        binaryNums<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>num <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 右移一位，即除以 2 并取整</span>
        num <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>num <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 因为上面的过程是从低位到高位，所以需要反转数组</span>
    binaryNums<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

    <span class="token comment">// 初始化记忆化数组 binaryDp，用来记录中间结果，避免重复计算</span>
    <span class="token comment">// binaryDp 的尺寸是 [binaryNums.length][2][2]，表示二进制位数 × 2 × 2</span>
    <span class="token comment">// 用来表示前两位的值（pre 和 prepre）以及当前位的最大值约束</span>
    <span class="token keyword">let</span> binaryDp <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> length<span class="token operator">:</span> binaryNums<span class="token punctuation">.</span>length <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> length<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 预填充为 0</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 调用 search 函数，开始递归搜索符合条件的数字</span>
    <span class="token keyword">return</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> binaryDp<span class="token punctuation">,</span> binaryNums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> flag<span class="token punctuation">,</span> binaryDp<span class="token punctuation">,</span> binaryNums<span class="token punctuation">,</span> pre<span class="token punctuation">,</span> prepre</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 边界条件：当所有二进制位都处理完时（p 等于二进制数位数），返回 1，表示找到一个符合条件的数</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">===</span> binaryNums<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 如果当前状态已经计算过且没有上界限制，直接返回已经保存的结果，避免重复计算</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag <span class="token operator">&amp;&amp;</span> binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 当前位的最大值</span>
    <span class="token comment">// 如果 flag 为 true，当前位的值由二进制数组 binaryNums[p] 决定；否则，当前位最大为 1</span>
    <span class="token keyword">let</span> index <span class="token operator">=</span> flag <span class="token operator">?</span> binaryNums<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// 用于累加符合条件的数的个数</span>

    <span class="token comment">// 枚举当前位的所有可能值（0 或 1）</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> index<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 如果出现 "101" 模式（即 prepre=1，pre=0，当前位 i=1），跳过该情况</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> pre <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> prepre <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 递归调用 search，处理下一位，并累加符合条件的数的个数</span>
        count <span class="token operator">+=</span> <span class="token function">search</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> flag <span class="token operator">&amp;&amp;</span> i <span class="token operator">===</span> index<span class="token punctuation">,</span> binaryDp<span class="token punctuation">,</span> binaryNums<span class="token punctuation">,</span> i<span class="token punctuation">,</span> pre<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 如果当前状态不再受到上界约束，保存当前计算结果到记忆化数组 binaryDp</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span> <span class="token operator">=</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 返回符合条件的数的个数</span>
    <span class="token keyword">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用 readline 模块来读取输入</span>
<span class="token keyword">const</span> readline <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'readline'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rl <span class="token operator">=</span> readline<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  input<span class="token operator">:</span> process<span class="token punctuation">.</span>stdin<span class="token punctuation">,</span>
  output<span class="token operator">:</span> process<span class="token punctuation">.</span>stdout
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 处理输入的每一行</span>
rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'line'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 将输入的区间 [left, right] 转换为数字</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>left<span class="token punctuation">,</span> right<span class="token punctuation">]</span> <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 计算区间 [left, right] 内不包含 "101" 模式的数的个数</span>
  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">dp</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">dp</span><span class="token punctuation">(</span>left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 输出计算结果</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="C_270"></a>C++</h2> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>

using namespace std<span class="token punctuation">;</span>

<span class="token comment">// 递归搜索函数，返回符合条件的数的个数</span>
<span class="token comment">// 参数说明：</span>
<span class="token comment">// - p：当前处理的二进制位位置</span>
<span class="token comment">// - flag：标记当前是否受上界限制</span>
<span class="token comment">// - binaryDp：记忆化数组，存储中间计算结果避免重复计算</span>
<span class="token comment">// - binaryNums：表示输入数字的二进制位数组</span>
<span class="token comment">// - pre：前一位的值</span>
<span class="token comment">// - prepre：前两位的值</span>
<span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span> p<span class="token punctuation">,</span> bool flag<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> binaryDp<span class="token punctuation">,</span> <span class="token keyword">const</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> binaryNums<span class="token punctuation">,</span> <span class="token keyword">int</span> pre<span class="token punctuation">,</span> <span class="token keyword">int</span> prepre<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 边界条件：当所有位都处理完时（即 p 等于二进制数位数），返回 1，表示找到一个符合条件的数</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> binaryNums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 如果当前状态已经计算过，且没有上限限制，则直接返回保存的结果，避免重复计算</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag <span class="token operator">&amp;&amp;</span> binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 确定当前位可以取的最大值</span>
    <span class="token comment">// 若 flag 为 true，当前位最大值为 binaryNums[p]，否则最大值为 1（因为不受上界约束）</span>
    <span class="token keyword">int</span> index <span class="token operator">=</span> flag <span class="token operator">?</span> binaryNums<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// 用于累加符合条件的数的个数</span>

    <span class="token comment">// 枚举当前位的所有可能值（0 和 1）</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> index<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 若出现 "101" 模式（即 prepre=1，pre=0，当前位 i=1），跳过该情况</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> pre <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> prepre <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 递归调用 search，处理下一位，并累加符合条件的数的个数</span>
        count <span class="token operator">+=</span> <span class="token function">search</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> flag <span class="token operator">&amp;&amp;</span> i <span class="token operator">==</span> index<span class="token punctuation">,</span> binaryDp<span class="token punctuation">,</span> binaryNums<span class="token punctuation">,</span> i<span class="token punctuation">,</span> pre<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 如果当前状态不受上界限制，记录计算结果到记忆化数组 binaryDp，以便后续直接使用</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span> <span class="token operator">=</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 返回符合条件的数的个数</span>
    <span class="token keyword">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// dp 函数，计算从 1 到 num 范围内不包含 "101" 二进制模式的数的个数</span>
<span class="token keyword">int</span> <span class="token function">dp</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 将数字 num 转换为二进制表示并存入数组 binaryNums</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> binaryNums<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>num <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        binaryNums<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>num <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 取 num 的最低位</span>
        num <span class="token operator">/=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// 去掉最低位</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 由于结果是从低位到高位依次存入 binaryNums，因此需要将数组反转，以便从高位开始处理</span>
    <span class="token function">reverse</span><span class="token punctuation">(</span>binaryNums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> binaryNums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 初始化记忆化数组 binaryDp，大小为二进制数位数 × 2 × 2，用于记录计算结果</span>
    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token function">binaryDp</span><span class="token punctuation">(</span>binaryNums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 调用递归搜索函数 search，从第 0 位开始搜索，初始 flag 为 true，pre 和 prepre 为 0</span>
    <span class="token keyword">return</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> true<span class="token punctuation">,</span> binaryDp<span class="token punctuation">,</span> binaryNums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> left<span class="token punctuation">,</span> right<span class="token punctuation">;</span>
    <span class="token comment">// 读取输入区间 [left, right]</span>
    cin <span class="token operator">&gt;&gt;</span> left <span class="token operator">&gt;&gt;</span> right<span class="token punctuation">;</span>

    <span class="token comment">// 计算区间 [left, right] 内不包含 "101" 模式的数的个数</span>
    <span class="token comment">// 结果为 dp(right) - dp(left - 1)，即右区间的符合数减去左区间前一位的符合数</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">dp</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">dp</span><span class="token punctuation">(</span>left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> result <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// 输出结果</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="C_354"></a>C语言</h2> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token comment">// dp 函数，用于计算从 1 到 num 范围内不包含 "101" 二进制模式的数的个数</span>
<span class="token keyword">int</span> <span class="token function">dp</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 将数字 num 转换为二进制存入数组 binaryNums</span>
    <span class="token keyword">int</span> binaryNums<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// binaryNums 用于保存 num 的二进制表示，最多 32 位</span>
    <span class="token keyword">int</span> binarySize <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// binarySize 用于记录二进制数的位数</span>

    <span class="token comment">// 将 num 转换为二进制，结果存入 binaryNums 数组</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>num <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        binaryNums<span class="token punctuation">[</span>binarySize<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> num <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// 取 num 的最低位</span>
        num <span class="token operator">/=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// 去掉最低位</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 由于是从低位到高位依次添加到 binaryNums 中，因此需要反转数组</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> binarySize <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> temp <span class="token operator">=</span> binaryNums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        binaryNums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> binaryNums<span class="token punctuation">[</span>binarySize <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        binaryNums<span class="token punctuation">[</span>binarySize <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 初始化记忆化数组 binaryDp，用于存储中间结果</span>
    <span class="token comment">// binaryDp[p][pre][prepre] 表示从第 p 位开始，前一位为 pre，前两位为 prepre 的状态下，不含 "101" 的个数</span>
    <span class="token keyword">int</span> binaryDp<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">memset</span><span class="token punctuation">(</span>binaryDp<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>binaryDp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 将所有位置初始化为 0</span>

    <span class="token comment">// 调用递归搜索函数 search，从第 0 位开始搜索，初始 flag 为 1，pre 和 prepre 为 0</span>
    <span class="token keyword">return</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> binaryDp<span class="token punctuation">,</span> binaryNums<span class="token punctuation">,</span> binarySize<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// search 函数，用于递归搜索符合条件的二进制数</span>
<span class="token comment">// p：当前处理的位</span>
<span class="token comment">// flag：是否受上界限制</span>
<span class="token comment">// binaryDp：记忆化数组，存储中间结果以便重复使用</span>
<span class="token comment">// binaryNums：num 的二进制表示数组</span>
<span class="token comment">// binarySize：二进制位数</span>
<span class="token comment">// pre：前一位的值</span>
<span class="token comment">// prepre：前两位的值</span>
<span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span> p<span class="token punctuation">,</span> <span class="token keyword">int</span> flag<span class="token punctuation">,</span> <span class="token keyword">int</span> binaryDp<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> binaryNums<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> binarySize<span class="token punctuation">,</span> <span class="token keyword">int</span> pre<span class="token punctuation">,</span> <span class="token keyword">int</span> prepre<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 当处理到最高位时（p 等于 binarySize），说明已找到符合条件的数，返回 1</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> binarySize<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 如果当前状态已经计算过且没有上限限制，直接返回存储的结果</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag <span class="token operator">&amp;&amp;</span> binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 根据 flag 确定当前位的取值范围</span>
    <span class="token comment">// 如果 flag 为 1，当前位最大可取 binaryNums[p]；否则最大可取 1</span>
    <span class="token keyword">int</span> index <span class="token operator">=</span> flag <span class="token operator">?</span> binaryNums<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// 用于计数符合条件的数的个数</span>

    <span class="token comment">// 枚举当前位可能的取值（0 或 1）</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> index<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 若出现 "101" 模式（即 prepre=1，pre=0，i=1），跳过该情况</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> pre <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> prepre <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 递归调用 search 计算下一位，并累加符合条件的计数</span>
        <span class="token comment">// flag &amp;&amp; i == index 表示当前位受上界限制且取到最大值时，下一位的 flag 保持为 1</span>
        count <span class="token operator">+=</span> <span class="token function">search</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> flag <span class="token operator">&amp;&amp;</span> i <span class="token operator">==</span> index<span class="token punctuation">,</span> binaryDp<span class="token punctuation">,</span> binaryNums<span class="token punctuation">,</span> binarySize<span class="token punctuation">,</span> i<span class="token punctuation">,</span> pre<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 如果不受上限约束（flag 为 0），将结果存入记忆化数组 binaryDp</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        binaryDp<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>pre<span class="token punctuation">]</span><span class="token punctuation">[</span>prepre<span class="token punctuation">]</span> <span class="token operator">=</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> count<span class="token punctuation">;</span>  <span class="token comment">// 返回符合条件的数的个数</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> left<span class="token punctuation">,</span> right<span class="token punctuation">;</span>
    <span class="token comment">// 输入区间范围 [left, right]</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>left<span class="token punctuation">,</span> <span class="token operator">&amp;</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 计算区间 [left, right] 内不包含 "101" 模式的数的个数</span>
    <span class="token comment">// 结果为 dp(right) 减去 dp(left - 1)</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">dp</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">dp</span><span class="token punctuation">(</span>left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出结果</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://img-blog.csdnimg.cn/img_convert/08aa3452b88e11a270e501e93c313fbc.png" alt="fengmian"></p>
                </div>
</body>
</html>
