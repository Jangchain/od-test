
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="OD_1"></a>最新华为OD机试</h2> 
<p><font color="RED">真题目录：<a href="https://blog.csdn.net/banxia_frontend/article/details/129640773">点击查看目录</a> </font><br> <font color="RED"> 华为OD面试真题精选：<a href="https://blog.csdn.net/banxia_frontend/category_12436481.html">点击立即查看</a></font></p> 
<h2><a id="_5"></a>题目描述</h2> 
<p>有一种简易压缩算法：针对全部为小写英文字母组成的字符串， 将其中连续超过两个相同字母的部分压缩为连续个数加该字母 其他部分保持原样不变.</p> 
<p>例如字符串aaabbccccd 经过压缩变成字符串 3abb4cd</p> 
<p>请您编写解压函数,根据输入的字符串,判断其是否为合法压缩过的字符串</p> 
<ul><li>若输入合法则输出解压缩后的字符串</li><li>否则输出字符串<code>!error</code>来报告错误</li></ul> 
<h2><a id="_17"></a>输入描述</h2> 
<p>输入一行，为一个 ASCII 字符串</p> 
<p>长度不超过<code>100</code>字符</p> 
<p>用例保证输出的字符串长度也不会超过<code>100</code>字符串</p> 
<h2><a id="_26"></a>输出描述</h2> 
<p>若判断输入为合法的经过压缩后的字符串</p> 
<p>则输出压缩前的字符串</p> 
<p>若输入不合法 则输出字符串<code>!error</code></p> 
<h2><a id="1_34"></a>示例1</h2> 
<p>输入</p> 
<pre><code>4dff
</code></pre> 
<p>输出</p> 
<pre><code>ddddff
</code></pre> 
<p>说明</p> 
<blockquote> 
 <p>4d 扩展为 4 个 d ，故解压后的字符串为 ddddff</p> 
</blockquote> 
<h2><a id="2_52"></a>示例2</h2> 
<p>输入</p> 
<pre><code>2dff
</code></pre> 
<p>输出</p> 
<pre><code>!error
</code></pre> 
<p>说明</p> 
<blockquote> 
 <p>2 个 d 不需要压缩 故输入不合法</p> 
</blockquote> 
<h2><a id="3_67"></a>示例3</h2> 
<p>输入</p> 
<pre><code>4d@A
</code></pre> 
<p>输出</p> 
<pre><code>!error
</code></pre> 
<p>说明</p> 
<blockquote> 
 <p>全部由小写英文字母做成的字符串，压缩后不会出现特殊字符@和大写字母 A<br> 故输入不合法</p> 
</blockquote> 
<h2><a id="_87"></a>解题思路</h2> 
<p>题目要求我们编写一个函数来判断一个字符串是否是经过合法压缩后的字符串，并且能够解压缩这个字符串。如果字符串不合法，则返回<code>!error</code>。</p> 
<h4><a id="_93"></a>压缩规则总结：</h4> 
<ul><li>连续超过两个相同的字母，将它们压缩为<code>数字 + 字母</code>的形式。例如，<code>aaa</code>压缩为<code>3a</code>，<code>cccc</code>压缩为<code>4c</code>。</li><li>字符串中的其他部分保持原样。</li></ul> 
<h4><a id="_98"></a>合法性检查：</h4> 
<ol><li>字符串中只允许包含小写字母和数字，不允许出现其他字符。</li><li>数字必须大于2，因为两个或更少个相同字母不应该压缩。</li><li>数字后面必须跟随一个小写字母，且该数字应扩展为对应数量的字母。</li></ol> 
<h4><a id="_104"></a>示例分析：</h4> 
<ul><li>输入<code>4dff</code>：<code>4d</code>扩展为<code>dddd</code>，合法字符串，输出为<code>ddddff</code>。</li><li>输入<code>2dff</code>：数字<code>2</code>不应出现，因为两个字母不需要压缩，输入不合法，输出<code>!error</code>。</li><li>输入<code>4d@A</code>：包含非法字符<code>@</code>和大写字母<code>A</code>，输入不合法，输出<code>!error</code>。</li></ul> 
<h2><a id="Java_112"></a>Java</h2> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Matcher</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 读取输入字符串</span>
        <span class="token class-name">String</span> s <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 定义匹配非法字符的正则表达式（非数字和小写字母的字符）</span>
        <span class="token class-name">String</span> pat <span class="token operator">=</span> <span class="token string">"[^0-9a-z]"</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 用于存储数字部分的字符串</span>
        <span class="token class-name">String</span> num <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 用于存储最终解压缩的结果</span>
        <span class="token class-name">String</span> res <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 编译正则表达式</span>
        <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>pat<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 如果找到非法字符，则直接输出 "!error"</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            res <span class="token operator">=</span> <span class="token string">"!error"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">isDigit</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            res <span class="token operator">=</span> <span class="token string">"!error"</span><span class="token punctuation">;</span>
        
        
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 遍历输入字符串的每一个字符</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">char</span> c <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                <span class="token comment">// 如果当前字符是数字，则将其追加到 num 中</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">isDigit</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    num <span class="token operator">+=</span> c<span class="token punctuation">;</span>
                <span class="token punctuation">}</span> 
                <span class="token comment">// 如果 num 不为空，表示之前有数字，需要进行解压操作</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>num<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 判断数字是否小于等于2，如果是则输入不合法</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        res <span class="token operator">=</span> <span class="token string">"!error"</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// 将对应数量的字母添加到结果中</span>
                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                            res <span class="token operator">+=</span> c<span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        <span class="token comment">// 重置 num 为空</span>
                        num <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> 
                <span class="token comment">// 如果当前字符是字母，且前面没有数字，则直接添加到结果中</span>
                <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                    res <span class="token operator">+=</span> c<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">// 输出最终结果</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="Python_183"></a>Python</h2> 
<pre><code class="prism language-python"><span class="token keyword">import</span> re

<span class="token comment"># 读取输入字符串</span>
s <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 定义匹配非法字符的正则表达式（非数字和小写字母的字符）</span>
pat <span class="token operator">=</span> <span class="token string">"[^0-9a-z]"</span>

<span class="token comment"># 用于存储数字部分的字符串</span>
num <span class="token operator">=</span> <span class="token string">""</span>

<span class="token comment"># 用于存储最终解压缩的结果</span>
res <span class="token operator">=</span> <span class="token string">""</span>

<span class="token comment"># 编译正则表达式并查找非法字符</span>
pattern <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>pat<span class="token punctuation">)</span>
matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span>search<span class="token punctuation">(</span>s<span class="token punctuation">)</span>

<span class="token comment"># 如果找到非法字符，则直接输出 "!error"</span>
<span class="token keyword">if</span> matcher<span class="token punctuation">:</span>
    res <span class="token operator">=</span> <span class="token string">"!error"</span>
<span class="token comment"># 最后一位是数组也不符合</span>
<span class="token keyword">elif</span> s<span class="token punctuation">[</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isdigit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    res <span class="token operator">=</span> <span class="token string">"!error"</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token comment"># 遍历输入字符串的每一个字符</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        c <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
         
        
        <span class="token comment"># 如果当前字符是数字，则将其追加到 num 中</span>
        <span class="token keyword">if</span> c<span class="token punctuation">.</span>isdigit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            num <span class="token operator">+=</span> c
             
        <span class="token comment"># 如果 num 不为空，表示之前有数字，需要进行解压操作</span>
        <span class="token keyword">elif</span> num <span class="token operator">!=</span> <span class="token string">""</span><span class="token punctuation">:</span>
            <span class="token comment"># 判断数字是否小于等于2，如果是则输入不合法</span>
            <span class="token keyword">if</span> <span class="token builtin">int</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">:</span>
                res <span class="token operator">=</span> <span class="token string">"!error"</span>
                <span class="token keyword">break</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token comment"># 将对应数量的字母添加到结果中</span>
                <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    res <span class="token operator">+=</span> c
                <span class="token comment"># 重置 num 为空</span>
                num <span class="token operator">=</span> <span class="token string">""</span>
        <span class="token comment"># 如果当前字符是字母，且前面没有数字，则直接添加到结果中</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            res <span class="token operator">+=</span> c

<span class="token comment"># 输出最终结果</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>

</code></pre> 
<h2><a id="JavaScript_240"></a>JavaScript</h2> 
<pre><code class="prism language-js"><span class="token keyword">const</span> readline <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'readline'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rl <span class="token operator">=</span> readline<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  input<span class="token operator">:</span> process<span class="token punctuation">.</span>stdin<span class="token punctuation">,</span>
  output<span class="token operator">:</span> process<span class="token punctuation">.</span>stdout
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'line'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 定义匹配非法字符的正则表达式（非数字和小写字母的字符）</span>
  <span class="token keyword">const</span> pat <span class="token operator">=</span> <span class="token string">'[^0-9a-z]'</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 用于存储数字部分的字符串</span>
  <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 用于存储最终解压缩的结果</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

  <span class="token comment">// 如果字符串包含非法字符，则输出 "!error"</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>pat<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    res <span class="token operator">=</span> <span class="token string">"!error"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token comment">// 检查最后一位是否是数字</span>
 <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isNaN</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>s<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    res <span class="token operator">=</span> <span class="token string">"!error"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 遍历输入字符串的每一个字符</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> c <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      
      <span class="token comment">// 如果当前字符是数字，则将其追加到 num 中</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[0-9]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        num <span class="token operator">+=</span> c<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> 
      <span class="token comment">// 如果 num 不为空，表示之前有数字，需要进行解压操作</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">!==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 判断数字是否小于等于2，如果是则输入不合法</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          res <span class="token operator">=</span> <span class="token string">"!error"</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
          <span class="token comment">// 将对应数量的字母添加到结果中</span>
          res <span class="token operator">+=</span> c<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// 重置 num 为空</span>
          num <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> 
      <span class="token comment">// 如果当前字符是字母，且前面没有数字，则直接添加到结果中</span>
      <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        res <span class="token operator">+=</span> c<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// 输出最终结果</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  rl<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="C_302"></a>C++</h2> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;regex&gt;</span></span>
using namespace std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 读取输入字符串</span>
    string s<span class="token punctuation">;</span>
    cin <span class="token operator">&gt;&gt;</span> s<span class="token punctuation">;</span>

    <span class="token comment">// 定义匹配非法字符的正则表达式（非数字和小写字母的字符）</span>
    string pat <span class="token operator">=</span> <span class="token string">"[^0-9a-z]"</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 用于存储数字部分的字符串</span>
    string num <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 用于存储最终解压缩的结果</span>
    string res <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 如果字符串包含非法字符，则输出 "!error"</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">regex_search</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token function">regex</span><span class="token punctuation">(</span>pat<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        res <span class="token operator">=</span> <span class="token string">"!error"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token comment">// 检查最后一位是否是数字</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isdigit</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        res <span class="token operator">=</span> <span class="token string">"!error"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 遍历输入字符串的每一个字符</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> c <span class="token operator">:</span> s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 如果当前字符是数字，则将其追加到 num 中</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isdigit</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                num <span class="token operator">+=</span> c<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> 
            <span class="token comment">// 如果 num 不为空，表示之前有数字，需要进行解压操作</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">!=</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 判断数字是否小于等于2，如果是则输入不合法</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">stoi</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    res <span class="token operator">=</span> <span class="token string">"!error"</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 将对应数量的字母添加到结果中</span>
                    res <span class="token operator">+=</span> <span class="token function">string</span><span class="token punctuation">(</span><span class="token function">stoi</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 重置 num 为空</span>
                    num <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> 
            <span class="token comment">// 如果当前字符是字母，且前面没有数字，则直接添加到结果中</span>
            <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                res <span class="token operator">+=</span> c<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 输出最终结果</span>
    cout <span class="token operator">&lt;&lt;</span> res <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="C_362"></a>C语言</h2> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ctype.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdbool.h&gt;</span></span>

<span class="token comment">// 定义一个函数，用于检查字符串中是否包含非法字符</span>
bool <span class="token function">contains_invalid_characters</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">*</span>s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 如果字符不是数字或小写字母，则认为是非法字符</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isdigit</span><span class="token punctuation">(</span><span class="token operator">*</span>s<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">islower</span><span class="token punctuation">(</span><span class="token operator">*</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> true<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        s<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> false<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 定义存储输入字符串的数组</span>
    <span class="token keyword">char</span> s<span class="token punctuation">[</span><span class="token number">1000</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 读取输入字符串</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 用于存储数字部分的字符串</span>
    <span class="token keyword">char</span> num<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 用于存储最终解压缩的结果</span>
    <span class="token keyword">char</span> res<span class="token punctuation">[</span><span class="token number">1000</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 如果字符串包含非法字符，则输出 "!error"</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">contains_invalid_characters</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">strcpy</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token string">"!error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token comment">// 检查最后一位是否是数字</span>
	 <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isdigit</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token function">strlen</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	        <span class="token function">strcpy</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token string">"!error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	 <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 遍历输入字符串的每一个字符</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">char</span> c <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            
            <span class="token comment">// 如果当前字符是数字，则将其追加到 num 中</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isdigit</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">strncat</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token operator">&amp;</span>c<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> 
            <span class="token comment">// 如果 num 不为空，表示之前有数字，需要进行解压操作</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 判断数字是否小于等于2，如果是则输入不合法</span>
                <span class="token keyword">int</span> repeat_count <span class="token operator">=</span> <span class="token function">atoi</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>repeat_count <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token function">strcpy</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token string">"!error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 将对应数量的字母添加到结果中</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> repeat_count<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token function">strncat</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token operator">&amp;</span>c<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token comment">// 重置 num 为空</span>
                    num<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> 
            <span class="token comment">// 如果当前字符是字母，且前面没有数字，则直接添加到结果中</span>
            <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">strncat</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token operator">&amp;</span>c<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 输出最终结果</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://img-blog.csdnimg.cn/img_convert/58a148304560220c8dc0adfb15a06d1e.png" alt="fengmian"></p> 
<h4><a id="_447"></a>完整用例</h4> 
<h5><a id="1_448"></a>用例1</h5> 
<p>4dff</p> 
<h5><a id="2_451"></a>用例2</h5> 
<p>2dff</p> 
<h5><a id="3_454"></a>用例3</h5> 
<p>4d@A</p> 
<h5><a id="4_457"></a>用例4</h5> 
<p>3abb4cd</p> 
<h5><a id="5_460"></a>用例5</h5> 
<p>2a3b4c</p> 
<h5><a id="6_463"></a>用例6</h5> 
<p>1p</p> 
<h5><a id="7_466"></a>用例7</h5> 
<p>aabbccdd</p> 
<h5><a id="8_469"></a>用例8</h5> 
<p>3a4b5c6d7e#8f</p> 
<h5><a id="9_472"></a>用例9</h5> 
<p>1a3c4d5e</p> 
<h5><a id="10_475"></a>用例10</h5> 
<p>12p</p>
                </div>
</body>
</html>
